From a.chaltsev@cs.man.ac.uk Wed Jul 24 17:54:19 2002
Status: RO
X-VM-v5-Data: ([nil nil nil nil nil nil nil nil nil]
	["29213" "Wednesday" "24" "July" "2002" "17:54:15" "+0100" "Andrey Chaltsev" "a.chaltsev@cs.man.ac.uk" nil nil "new ServerInterface (with std::iostream)" "^From:" nil nil "7" nil nil nil nil nil]
	nil)
Return-path: <a.chaltsev@cs.man.ac.uk>
Envelope-to: avoronkov@mailhost.cs.man.ac.uk
Delivery-date: Wed, 24 Jul 2002 17:54:19 +0100
Received: from m1 ([130.88.192.2] helo=m1.cs.man.ac.uk)
	by mailhost with esmtp (Exim 3.16 #3)
	id 17XPP0-0007M9-00
	for avoronkov@mailhost.cs.man.ac.uk; Wed, 24 Jul 2002 17:54:18 +0100
Received: from rpc19.cs.man.ac.uk by m1.cs.man.ac.uk (8.8.8/AL/MJK-2.0)
	id RAA07744; Wed, 24 Jul 2002 17:54:17 +0100 (BST)
Received: from localhost (chaltsea@localhost)
	by rpc19.cs.man.ac.uk (8.9.3/8.9.3) with ESMTP id RAA04168
	for <voronkov@cs.man.ac.uk>; Wed, 24 Jul 2002 17:54:15 +0100
X-Authentication-Warning: rpc19.cs.man.ac.uk: chaltsea owned process doing -bs
X-X-Sender:  <chaltsea@rpc19.cs.man.ac.uk>
Message-ID: <Pine.LNX.4.33.0207241734080.2225-400000@rpc19.cs.man.ac.uk>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="1484943558-1020451908-1027529655=:2225"
From: Andrey Chaltsev <a.chaltsev@cs.man.ac.uk>
To: Andrei Voronkov <voronkov@cs.man.ac.uk>
Subject: new ServerInterface (with std::iostream)
Date: Wed, 24 Jul 2002 17:54:15 +0100 (BST)

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1484943558-1020451908-1027529655=:2225
Content-Type: TEXT/PLAIN; charset=US-ASCII

Here are new classes that inherit from standard std::iostream classes and
wrap sockets.

ServerInterface.hpp - contains new classes inheriting from  standard
streambuf, istream, ostream and iostream.

ServerInterface.cpp - their implementation.

Almost all (new) code is in the class SocketBuffer(analog of
streambuf) that has  only three public functions: constructor, destructor
and init.
ISocketStream(istream), OSocketStream(ostream), IOSocketStream(iostream)
just create SocketBuffer and invoke its 'init' function  in constructors,
and delete it in destructors.

So all you need to do is just create IOSocketStream object that will work
as standard iostream.

example_use.cpp - just an example of use.

In case of error an exception std::ios_base::failure with some error
message may be threw. So I added new 'catch' in try-block.

Do not forget to remove old ServerInterface files (that work with stdin
stdout) to prevent mess.

  Andrey
-- 
                              Jul 24
       Andrey Chaltsev
       room 2.70
       Computer Science Department,
       The University of Manchester,
       mailto: a.chaltsev@cs.man.ac.uk

--1484943558-1020451908-1027529655=:2225
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="example_use.cpp"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.33.0207241754150.2225@rpc19.cs.man.ac.uk>
Content-Description: 
Content-Disposition: attachment; filename="example_use.cpp"

Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0tKi1DKystKi09DQovLyBGaWxlOiAg
ICAgICAgbWFpbi5jcHANCi8vIERlc2NyaXB0aW9uOiBFeGFtcGxlIG9mIHRo
ZSB1c2Ugb2YgbmV3IGNsYXNzIFNlcnZlckludGVyZmFjZSB0aGF0IA0KLy8g
ICAgICAgICAgICAgIHdvcmtzIHdpdGggc3RhbmRhcmQgaW9zdHJlYW0uDQov
LyBQYXJ0IG9mOiAgICAgDQovLyBTdGF0dXM6ICAgICAgDQovLyBDcmVhdGVk
OiAgICAgSnVsIDI0LCAyMDAyLCBBbmRyZXkgQ2hhbHRzZXYsIGNoYWx0c2V2
QGNzLm1hbi5hYy51aw0KLy8gRG9jOiAgICAgICAgIA0KLy8gQ29tcGxpYW5j
ZToNCi8vIFJldmlld2VkOiAgICANCi8vICAgICAgICAgICAgICANCi8vIFJl
dmlzZWQ6ICAgICANCi8vICAgICAgICAgICAgICANCi8vIE5vdGU6ICAgICAg
ICANCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQoNCiNp
bmNsdWRlICJLSUZMZXhlci5ocHAiDQojaW5jbHVkZSAiS0lGUGFyc2VyLmhw
cCINCg0KI2luY2x1ZGUgIlNlcnZlckludGVyZmFjZS5ocHAiDQoNCmludCBt
YWluKCkNCnsNCiAgdHJ5IHsNCiAgICBzdGQ6OmNlcnIgPDwgIlNlcnZlciBp
cyBiZWluZyBzZXQgLi4uIFxuIjsgLy8ganVzdCBhIG1lc3NhZ2UNCg0KICAg
IC8vIHNlcnZlciBjcmVhdGlvbiBibG9ja3MgZXhlY3V0aW9uIHVudGlsbCBh
IGNvbm5lY3Rpb24gaXMgcHJlc2VudA0KICAgIElPU29ja2V0U3RyZWFtKiBp
b1NvY2tldFN0cmVhbSA9IG5ldyBJT1NvY2tldFN0cmVhbSg1MDAxKTsNCg0K
ICAgIHN0ZDo6Y2VyciA8PCAiQSBjbGllbnQgY29ubmVjdGVkXG4iOy8vIGp1
c3QgYSBtZXNzYWdlDQoNCiAgICAvLyBjcmVhdGUgcGFyc2VyIGFuZCBsZXhl
ciBhbmQgYXNzb2NpYXRlIGxleGVyIHdpdGggaW5wdXQgc3RyZWFtDQogICAg
S0lGTGV4ZXIga2lmTGV4ZXIoKmlvU29ja2V0U3RyZWFtKTsNCiAgICBLSUZQ
YXJzZXIgcGFyc2VyKGtpZkxleGVyKTsNCg0KICAgIHdoaWxlKDEpDQogICAg
ICB7DQogICAgICAgIHBhcnNlci5zdGFydCgpOw0KDQogICAgICAgIC4uLiBh
bmFseXNpcyBvZiBkYXRhIGdvdCBhbmQgY3JlYXRpb24gb2YgYW4gYW5zd2Vy
IC4uLg0KDQogICAgICAgICgqaW9Tb2NrZXRTdHJlYW0pIDw8IHNvbWUgYW5z
d2VyOw0KICAgICAgICANCiAgICAgICAgLy8gZmx1c2ggb3V0cHV0IHN0cmVh
bQ0KICAgICAgICAoKmlvU29ja2V0U3RyZWFtKTw8c3RkOjplbmRsOw0KICAg
IG9yICAoKmlvU29ja2V0U3RyZWFtKS5mbHVzaCgpOw0KICAgIG9yICAoKmlv
U29ja2V0U3RyZWFtKTw8c3RkOjpmbHVzaDsNCiAgICAgIH0NCiAgICAvLyBk
ZWxldGUgaW9zdHJlYW0gYW5kIHNvY2tldHMgDQogICAgZGVsZXRlIGlvU29j
a2V0U3RyZWFtOw0KICB9IA0KICAvLyBvbmUgYWRkaXRpb25hbCBjYXRjaCB0
byB3b3JrIHdpdGggSS9PIChzb2NrZXQpIGVycm9ycw0KICBjYXRjaChzdGQ6
Omlvc19iYXNlOjpmYWlsdXJlJiBzdHJlYW1GYWlsdXJlKQ0KICAgIHsNCiAg
ICAgIHN0ZDo6Y2VyciA8PCJFcnJvciBpbiBJL086IiA8PCAgc3RyZWFtRmFp
bHVyZS53aGF0KCkgPDwgIlxuIjsNCiAgICAgIGV4aXQoMSk7DQogICAgfQ0K
DQogIHJldHVybiAxOw0KfTsNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0NCg0KDQovLyAtLS0gZW5kIG9mIGZpbGUgLS0tDQo=
--1484943558-1020451908-1027529655=:2225
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="ServerInterface.cpp"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.33.0207241754151.2225@rpc19.cs.man.ac.uk>
Content-Description: 
Content-Disposition: attachment; filename="ServerInterface.cpp"

Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0tKi1DKystKi09PQ0KLy8gJElkOiBT
ZXJ2ZXJJbnRlcmZhY2UuaHBwLHYgMS4xLjEuMSAyMDAyLzA3LzE2IDE0OjAy
OjQ3IGNoYWx0c2VhIEV4cCAkIA0KLy8NCi8vIEZpbGU6ICAgICAgICBTZXJ2
ZXJJbnRlcmZhY2UuaHBwDQovLyBEZXNjcmlwdGlvbjogQ29udGFpbnMgZ3Jv
dXAgb2YgY2xhc3MgdG8gYmluZCBzb2NrZXQgd2l0aCBzdGQ6Omlvc3RyZWFt
IA0KLy8gICAgICAgICAgICAgIGNsYXNzZXMuIFRoZXJlIGFyZSB0cmVlIGNs
YXNzZXM6DQovLyAgICAgICAgICAgICAgICAgIFNvY2tldEJ1ZmZlciBpbmhl
cml0ZWQgZnJvbSBzdGQ6OnN0cmVhbWJ1ZmYNCi8vICAgICAgICAgICAgICAg
ICAgSVNvY2tldFN0cmVhbSBpbmhlcml0ZWQgZnJvbSBzdGQ6OmlzdHJlYW0N
Ci8vICAgICAgICAgICAgICAgICAgT1NvY2tldFN0cmVhbSBpbmhlcml0ZWQg
ZnJvbSBzdGQ6Om9zdHJlYW0NCi8vICAgICAgICAgICAgICAgICAgSU9Tb2Nr
ZXRTdHJlYW0gaW5oZXJpdGVkIGZyb20gc3RkOjppb3N0cmVhbQ0KLy8NCi8v
ICAgICAgICAgICAgICBTb2NrZXRCdWZmZXIgaGFzIGZ1bmN0aW9uIGluaXQg
dGhhdCBtdXN0IGJlIGludm9rZWQgb25jZSB0byANCi8vICAgICAgICAgICAg
ICBpbnRhbGwgc2VydmVyICh0Y3AgcHJvdG9jb2wpIG9uIHRoZSBwb3J0IGdp
dmVuIGFzIGFyZ3VtZW50IA0KLy8gICAgICAgICAgICAgIHRvIGNvbnN0cnVj
dG9yLg0KLy8gICAgICAgICAgICAgIEFsbCBvdGhlciBjbGFzc2VzIGluZWhl
ZWl0IGZyb20gc3Rhcm5kYXJkIGNsYXNzZXMgYnV0IGNyZWF0ZQ0KLy8gICAg
ICAgICAgICAgIGFuZCB1c2UgU29ja2V0QnVmZmVyIGluc3RlYWQgb2Ygc3Rk
OjpzdHJlYW1idWZmLg0KLy8gICAgICAgICAgICAgIEVzdGFibGlzaGluZyBh
IGNvbm5lY3Rpb24gYmxvY2tzIGV4ZWN1dGlvbiB0aWxsIGEgY29ubmVjdGlv
bg0KLy8gICAgICAgICAgICAgIGlzIHByZXNlbnQuIFNvIGFsbCBvdXIgc3Ry
ZWFtIGNsYXNzZXMgYmxvY2sgZXhlY3V0aW9uIGFzIHdlbGwuDQovLyBQYXJ0
IG9mOiAgICAgVmFtcGlyZS1TaWdtYSBjb21tdW5pY2F0aW9uIHRocm91Z2gg
WE1MLUtJRiBpbnRlcmZhY2UuDQovLyBTdGF0dXM6ICAgICAgZHJhZnQNCi8v
IENyZWF0ZWQ6ICAgICBKdWwgMTcsIDIwMDIsIEFuZHJleSBDaGFsdHNldiwg
Y2hhbHRzZXZAY3MubWFuLmFjLnVrDQovLyBEb2M6DQovLyBDb21wbGlhbmNl
Og0KLy8gUmV2aWV3ZWQ6ICAgIA0KLy8gUmV2aXNlZDogICAgIA0KLy8gTm90
ZTogICAgICAgIA0KLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
DQoNCg0KI2luY2x1ZGUgPHN5cy90eXBlcy5oPg0KI2luY2x1ZGUgPHN5cy9z
b2NrZXQuaD4NCiNpbmNsdWRlIDxjc3RkaW8+DQojaW5jbHVkZSA8Y3N0ZGxp
Yj4NCiNpbmNsdWRlIDxuZXRpbmV0L2luLmg+DQojaW5jbHVkZSA8dW5pc3Rk
Lmg+DQojaW5jbHVkZSA8aW9zdHJlYW0+DQojaW5jbHVkZSA8Y3N0cmluZz4N
Cg0KI2luY2x1ZGUgPGVycm5vLmg+DQoNCiNpbmNsdWRlICJTZXJ2ZXJJbnRl
cmZhY2UuaHBwIg0KLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KLy89PT09PSAgICBjbGFzcyAgU29ja2V0QnVmZmVyICAgICAgICAgICAg
PT09PT09PT09PT09PQ0KLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQ0KDQovLyBpbnRlZ2VyIGNvbnN0YW50IGluZGljYXRpbmcgc2l6ZSBv
ZiB0aGUgaW5uZXIgYnVmZmVyLiBZb3UgbWF5IGNoYW5nZSBpdC4NCmNvbnN0
IHVuc2lnbmVkIGludCAgQlVGRkVSX1NJWkUgPSAxMDI0Ow0KLy8tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KU29ja2V0QnVmZmVyOjpTb2Nr
ZXRCdWZmZXIgKHVuc2lnbmVkIGludCBwb3J0KQ0KICA6IHN0ZDo6c3RyZWFt
YnVmKCksIGxpc3RlbmluZ1NvY2tldF8oLTEpLCBhY2NlcHRlZFNvY2tldF8o
LTEpLCBwb3J0Xyhwb3J0KQ0Kew0KICBpbkJ1ZmZlcl8gID0gOjpuZXcgY2hh
cl90eXBlW0JVRkZFUl9TSVpFXTsNCiAgb3V0QnVmZmVyXyA9IDo6bmV3IGNo
YXJfdHlwZVtCVUZGRVJfU0laRV07DQoNCiAgc2V0ZyAoaW5CdWZmZXJfLCBp
bkJ1ZmZlcl8gKyBCVUZGRVJfU0laRSwgaW5CdWZmZXJfICsgQlVGRkVSX1NJ
WkUpOw0KICBzZXRwIChvdXRCdWZmZXJfLCBvdXRCdWZmZXJfICsgQlVGRkVS
X1NJWkUpOw0KfTsgLy8gU29ja2V0QnVmZmVyOjpTb2NrZXRCdWZmZXIgKHVu
c2lnbmVkIGludCBwb3J0KQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tDQoNClNvY2tldEJ1ZmZlcjo6flNvY2tldEJ1ZmZlciAoKQ0K
ew0KICBvdmVyZmxvdyAodHJhaXRzX3R5cGU6OmVvZigpKTsgLy8gZmx1c2gg
b3V0cHV0IGJ1ZmZlcg0KICA6OmRlbGV0ZVtdIGluQnVmZmVyXzsNCiAgOjpk
ZWxldGVbXSBvdXRCdWZmZXJfOw0KDQogIGlmKC0xICE9IGFjY2VwdGVkU29j
a2V0XykgLy8gY29ubmVjdGlvbiB3YXMgZXN0YWJsaXNoZWQgPT4gY2xvc2Ug
aXQNCiAgICBpZiAoIC0xID09IDo6Y2xvc2UoYWNjZXB0ZWRTb2NrZXRfKSAp
DQogICAgICAgICB0aHJvdyBzdGQ6Omlvc19iYXNlOjpmYWlsdXJlKCJzb2Nr
ZXQgY2xvc2luZyBmYWlsZWQiKTsNCiAgDQogIGlmKC0xICE9IGxpc3Rlbmlu
Z1NvY2tldF8pIC8vIHNvY2tldCB3YXMgY3JlYXRlZCA9PiBjbG9zZSBpdA0K
ICAgIGlmICggLTEgPT0gOjpjbG9zZShsaXN0ZW5pbmdTb2NrZXRfKSApDQog
ICAgICB0aHJvdyBzdGQ6Omlvc19iYXNlOjpmYWlsdXJlKCJzb2NrZXQgY2xv
c2luZyBmYWlsZWQiKTsNCn07IC8vIFNvY2tldEJ1ZmZlcjo6flNvY2tldEJ1
ZmZlciAoKQ0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0K
DQp2b2lkDQpTb2NrZXRCdWZmZXI6OmluaXQoKSB0aHJvdyAoc3RkOjppb3Nf
YmFzZTo6ZmFpbHVyZSkNCnsNCg0KICBpZiAoIC0xICE9ICBsaXN0ZW5pbmdT
b2NrZXRfKQ0KICAgIHsNCiAgICAgIC8vIHNvY2tldCB3YXMgYWxyZWFkeSBj
cmVhdGVkID0+IHRoaXMgZnVuY3Rpb24gd2FzIGludm9rZWQgYWxyZWFkeQ0K
ICAgICAgdGhyb3cgc3RkOjppb3NfYmFzZTo6ZmFpbHVyZSgiZG91YmxlIGlu
dm9jYXRpb24gb2YgU29ja2V0QnVmZmVyOjppbml0Iik7DQogICAgfTsNCg0K
ICAvLyBvcGVuIHNvY2tldCBmb3IgdGNwIHByb3RvY29sDQogIGlmKChsaXN0
ZW5pbmdTb2NrZXRfID0gOjpzb2NrZXQoQUZfSU5FVCxTT0NLX1NUUkVBTSww
KSkgPCAwKQ0KICAgIHsNCiAgICAgIHRocm93IHN0ZDo6aW9zX2Jhc2U6OmZh
aWx1cmUoc3RkOjpzdHJpbmcoInNvY2tldCBvcGVuaW5nIGZhaWxlZDoiKQ0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIDo6c3lzX2Vy
cmxpc3RbZXJybm9dKTsgLy8gZXJybm8uaA0KICAgIH07DQogIA0KICAvLyBj
cmVhdGUgc3RydWN0dXJlIGNvbnN0YWluaW5nIGluZm9ybWF0aW9uIGFib3V0
IGxvY2FsIGFkZHJlc3MgYW5kIHBvcnQNCiAgc3RydWN0IHNvY2thZGRyX2lu
IGFkZHI7DQogIGFkZHIuc2luX2ZhbWlseSA9IEFGX0lORVQ7DQogIGFkZHIu
c2luX2FkZHIuc19hZGRyID0gSU5BRERSX0FOWTsNCiAgYWRkci5zaW5fcG9y
dCA9IGh0b25zKHBvcnRfKTsNCiAgDQogIA0KICAvLyBiaW5kIGdpdmVuIHNv
Y2tldCBhbmQgdGhlIHBvcnQNCiAgaWYoIDo6YmluZChsaXN0ZW5pbmdTb2Nr
ZXRfLCAoc3RydWN0IHNvY2thZGRyKikmYWRkciwgc2l6ZW9mKGFkZHIpKSA8
IDApDQogICAgew0KICAgICAgLy8gdXN1YWx5IHRoaXMgZnVuY3Rpb24gZmFp
bGVkIGlmIGdpdmVuIHBvcnQgd2FzIGFscmVhZHkgaW4gdXNlLg0KICAgICAg
Ly8gY2hlY2sgaXQgd2l0aCBuZXRzdGF0IGNvbW1hbmQuDQogICAgICB0aHJv
dyBzdGQ6Omlvc19iYXNlOjpmYWlsdXJlKHN0ZDo6c3RyaW5nKCJzb2NrZXQg
YmluZGluZyBmYWlsZWQ6IikNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgKyA6OnN5c19lcnJsaXN0W2Vycm5vXSk7IC8vIGVycm5vLmgN
CiAgICB9Ow0KICANCiAgLy8gYmVnaW4gbGlzdGVubmluZw0KICBpZig6Omxp
c3RlbihsaXN0ZW5pbmdTb2NrZXRfLCAxICkgPCAwKQ0KICAgIHsNCiAgICAg
IHRocm93IHN0ZDo6aW9zX2Jhc2U6OmZhaWx1cmUoc3RkOjpzdHJpbmcoInNv
Y2tldCBsaXN0ZW5pbmcgZmFpbGVkOiIpDQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICsgOjpzeXNfZXJybGlzdFtlcnJub10pOyAvLyBl
cnJuby5oDQogICAgfTsNCg0KICBzdHJ1Y3QgIHNvY2thZGRyIGluY29taW5n
QWRkcmVzczsgLy8gYWRkcmVzcyBvZiBhbiBpbmNvbWluZyBjb25uZWN0aW9u
DQogIHNvY2tsZW5fdCBzaXplID0gc2l6ZW9mKGluY29taW5nQWRkcmVzcyk7
DQogIA0KICAvLyBpdCBibG9ja3MgdW50aWwgYSBjb25uZWN0aW9uIGlzIHBy
ZXNlbnQNCiAgaWYoIChhY2NlcHRlZFNvY2tldF8gPSA6OmFjY2VwdChsaXN0
ZW5pbmdTb2NrZXRfLCAmaW5jb21pbmdBZGRyZXNzLCAmc2l6ZSkpDQogICAg
ICA8IDAgKSANCiAgICB7DQogICAgICB0aHJvdyBzdGQ6Omlvc19iYXNlOjpm
YWlsdXJlKHN0ZDo6c3RyaW5nKCJzb2NrZXQgYWNjZXB0aW5nIGZhaWxlZDoi
KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIDo6c3lz
X2Vycmxpc3RbZXJybm9dKTsgLy8gZXJybm8uaA0KICAgIH07DQogIA0KICAg
cmV0dXJuIDsNCn07IC8vIFNvY2tldEJ1ZmZlcjo6aW5pdCgpDQoNCi8vLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KLy8gd2UgbmV2ZXIg
cmV0dXJuIC0xIGJlY2F1c2Ugd2UgdGhyb3cgZXhjZXB0aW9uIA0KaW50DQpT
b2NrZXRCdWZmZXI6OnN5bmMgKCkNCnsNCiAgaWYgKCBwcHRyKCkgJiYgcGJh
c2UoKSA8IHBwdHIoKSAmJiBwcHRyKCkgPD0gZXBwdHIoKSApDQogICAgew0K
ICAgICAgLy8gd2UgaGF2ZSBzb21lIGRhdGEgdG8gZmx1c2gNCiAgICAgIGNo
YXJfdHlwZSogaXRlcmF0b3IgPSBwYmFzZSAoKTsNCiAgICAgIHdoaWxlKCBp
dGVyYXRvciA8IHBwdHIoKSApDQogICAgICAgIHsNCiAgICAgICAgICBpbnQg
bGVuZ3RoID0gOjp3cml0ZShhY2NlcHRlZFNvY2tldF8sIGl0ZXJhdG9yLCBw
cHRyKCkgLSBpdGVyYXRvciApOw0KICAgICAgICAgIA0KICAgICAgICAgIGlm
ICggLTEgPT0gbGVuZ3RoKSAvLyBlcnJvcg0KICAgICAgICAgICAgew0KICAg
ICAgICAgICAgIHRocm93IHN0ZDo6aW9zX2Jhc2U6OmZhaWx1cmUoc3RkOjpz
dHJpbmcoInNvY2tldCB3cml0aW5nIGZhaWxlZDoiKQ0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyA6OnN5c19lcnJsaXN0
W2Vycm5vXSk7IC8vIGVycm5vLmgNCiAgICAgICAgICAgIH0NCiAgICAgICAg
ICBlbHNlIGlmKCAwID09IGxlbmd0aCApDQogICAgICAgICAgICB7DQogICAg
ICAgICAgICAgIC8vIEkgZG9uJ3Qga25vdyBob3cgdG8gaW50ZXJwcmV0IHRo
aXMgY2FzZQ0KICAgICAgICAgICAgICB0aHJvdyBzdGQ6Omlvc19iYXNlOjpm
YWlsdXJlKCJ3cml0ZSBpbnRvIHNvY2tldCByZXR1cm5lZCAwIik7DQogICAg
ICAgICAgICB9DQogICAgICAgICAgDQogICAgICAgICAgaXRlcmF0b3IgKz0g
bGVuZ3RoOw0KICAgICAgICB9Ow0KICAgICAgDQogICAgICAvLyB3ZSB3cm90
ZSBhbGwgZGF0YQ0KICAgICAgc2V0cChvdXRCdWZmZXJfLCBvdXRCdWZmZXJf
ICsgQlVGRkVSX1NJWkUpOw0KICAgIH0NCiAgcmV0dXJuIDA7DQp9OyAvLyBp
bnQgU29ja2V0QnVmZmVyOjpzeW5jICgpDQovLy0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tDQoNCi8vIHJldHVybiB0aGUgbnVtYmVyIG9mIGNo
YXJhY3RlcnMgaW4gdGhlIGlucHV0IGJ1ZmZlcg0KaW50DQpTb2NrZXRCdWZm
ZXI6OnNob3dtYW55YyAoKSBjb25zdA0Kew0KICBpZiggZ3B0cigpICYmIGdw
dHIoKSA8IGVncHRyKCkgKQ0KICAgIHJldHVybiBlZ3B0cigpIC0gZ3B0cigp
Ow0KICByZXR1cm4gMDsNCn07IC8vIGludCBTb2NrZXRCdWZmZXI6OnNob3dt
YW55YyAoKSBjb25zdA0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0Kc3RkOjpzdHJlYW1zaXplDQpTb2NrZXRCdWZmZXI6OnhzZ2V0bihj
aGFyX3R5cGUqIHMsIHN0ZDo6c3RyZWFtc2l6ZSBuKQ0Kew0KICBzdGQ6OnN0
cmVhbXNpemUgYXZhaWwgPSAoZ3B0cigpICYmIGdwdHIoKSA8IGVncHRyKCkp
ID8gZWdwdHIoKSAtIGdwdHIoKSA6IDAgOw0KICBpZiAoYXZhaWwgPj0gbikN
CiAgICB7DQogICAgICBtZW1jcHkocywgZ3B0cigpLCBuICogc2l6ZW9mIChj
aGFyX3R5cGUpKTsNCiAgICAgIGdidW1wKG4pOw0KICAgICAgcmV0dXJuIG47
DQogICAgfTsNCiAgDQogIG1lbWNweShzLCBncHRyKCksIGF2YWlsICogc2l6
ZW9mKGNoYXJfdHlwZSkpOw0KICBnYnVtcChhdmFpbCk7DQoNCiAgaWYodW5k
ZXJmbG93KCkgIT0gdHJhaXRzX3R5cGU6OmVvZigpICkNCiAgICByZXR1cm4g
YXZhaWwgKyB4c2dldG4ocyArIGF2YWlsLCBuIC0gYXZhaWwpOw0KICANCiAg
cmV0dXJuIGF2YWlsOw0KfTsgLy8gU29ja2V0QnVmZmVyOjp4c2dldG4oDQov
Ly0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNClNvY2tldEJ1
ZmZlcjo6aW50X3R5cGUNClNvY2tldEJ1ZmZlcjo6dW5kZXJmbG93ICgpDQp7
DQogIGlmKGdwdHIoKSA9PSAwKQ0KICAgIHJldHVybiB0cmFpdHNfdHlwZTo6
ZW9mKCk7IC8vIGlucHV0IHN0cmVhbSBoYXMgYmVlbiBkaXNhYmxlZA0KDQog
IGlmKGdwdHIoKSA8IGVncHRyKCkpIC8vIGJ1ZmZlciBpcyBub3QgZW1wdHkN
CiAgICByZXR1cm4gKmdwdHIgKCk7DQoNCiAgLy8gYnVmZmVyIGlzIGVtcHR5
ID0+IHJlYWQgZnJvbSBzb2NrZXQNCiAgc3NpemVfdCBsZW5ndGggPSA6OnJl
YWQgKGFjY2VwdGVkU29ja2V0XywgaW5CdWZmZXJfLCBCVUZGRVJfU0laRSk7
DQoNCiAgaWYoLTEgPT0gbGVuZ3RoKSAvLyBlcnJvcg0KICAgIHsNCiAgICAg
IHRocm93IHN0ZDo6aW9zX2Jhc2U6OmZhaWx1cmUoc3RkOjpzdHJpbmcoInNv
Y2tldCByZWFkaW5nIGZhaWxlZDoiKQ0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICArIDo6c3lzX2Vycmxpc3RbZXJybm9dKTsgLy8gZXJy
bm8uaA0KICAgIH07DQoNCiAgaWYoIDAgPT0gbGVuZ3RoKSAvLyBFT0Ygd2Fz
DQogICAgcmV0dXJuIHRyYWl0c190eXBlOjplb2YoKSA7DQogIA0KICBzZXRn
IChpbkJ1ZmZlcl8sIGluQnVmZmVyXywgaW5CdWZmZXJfICsgbGVuZ3RoKTsN
CiAgcmV0dXJuICpncHRyICgpOw0KfTsgLy8gU29ja2V0QnVmZmVyOjp1bmRl
cmZsb3cgKCkNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0N
Cg0KU29ja2V0QnVmZmVyOjppbnRfdHlwZQ0KU29ja2V0QnVmZmVyOjp1Zmxv
dyAoKQ0Kew0KICBpbnRfdHlwZSByZXQgPSB1bmRlcmZsb3coKTsNCiAgaWYo
IHJldCAhPSB0cmFpdHNfdHlwZTo6ZW9mKCkgKQ0KICAgIGdidW1wICgxKTsN
Cg0KICByZXR1cm4gcmV0Ow0KfTsgLy8gU29ja2V0QnVmZmVyOjp1ZmxvdyAo
KQ0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpTb2Nr
ZXRCdWZmZXI6OmludF90eXBlDQpTb2NrZXRCdWZmZXI6OnBiYWNrZmFpbChp
bnRfdHlwZSBjKQ0Kew0KICByZXR1cm4gdHJhaXRzX3R5cGU6OmVvZigpOw0K
fTsgLy8gU29ja2V0QnVmZmVyOjpwYmFja2ZhaWwNCi8vLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0Kc3RkOjpzdHJlYW1zaXplDQpTb2Nr
ZXRCdWZmZXI6OnhzcHV0bihjb25zdCBjaGFyX3R5cGUqIHMsIHN0ZDo6c3Ry
ZWFtc2l6ZSBuKQ0Kew0KICBzdGQ6OnN0cmVhbXNpemUgYXZhaWwgPSBwcHRy
KCkgPyBlcHB0cigpIC0gcHB0cigpIDogMDsNCiAgaWYobiA8PSBhdmFpbCkN
CiAgICB7DQogICAgICBtZW1jcHkgKHBwdHIgKCksIHMsIG4gKiBzaXplb2Yo
Y2hhcl90eXBlKSk7DQogICAgICBwYnVtcCAobik7DQogICAgICByZXR1cm4g
bjsNCiAgICB9Ow0KDQogIG1lbWNweSggcHB0cigpLCBzLCBhdmFpbCAqIHNp
emVvZihjaGFyX3R5cGUpICk7DQogIHBidW1wKCBhdmFpbCApOw0KICANCiAg
aWYoIG92ZXJmbG93KCkgIT0gdHJhaXRzX3R5cGU6OmVvZigpICkNCiAgICBy
ZXR1cm4gYXZhaWwgKyB4c3B1dG4ocyArIGF2YWlsLCBuIC0gYXZhaWwpOw0K
DQogIHJldHVybiBhdmFpbDsNCn07IC8vIFNvY2tldEJ1ZmZlcjo6eHNwdXRu
DQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCi8vaWYg
ZXJyb3IgaGFwcGVucywgdGhyb3dzIGV4Y2VwdGlvbi4NClNvY2tldEJ1ZmZl
cjo6aW50X3R5cGUNClNvY2tldEJ1ZmZlcjo6b3ZlcmZsb3coaW50X3R5cGUg
YykNCnsNCiAgc3luYygpOyAvLyBlbXB0eSBidWZmZXINCiAgaWYoIHRyYWl0
c190eXBlOjplb2YoKSAhPSBjICkgLy90aGVyZSBpcyBvbmUgbW9yZSBjaGFy
YWN0ZXINCiAgICB7DQogICAgICBpZiggcHB0cigpICkgLy8gdGhlcmUncyBi
dWZmZXIgPT4gd3JpdGUgaW50byBpdA0KICAgICAgICB7DQogICAgICAgICAg
KnBwdHIgKCkgPSAoY2hhcl90eXBlKWM7DQogICAgICAgICAgcGJ1bXAgKDEp
Ow0KICAgICAgICB9DQogICAgICBlbHNlIC8vIHdyaXRlIGRpcmVjdGx5IGlu
dG8gc29ja2V0DQogICAgICAgIHsNCiAgICAgICAgICBpbnQgbGVuZ3RoID0g
Ojp3cml0ZShhY2NlcHRlZFNvY2tldF8sICZjLCBzaXplb2YoY2hhcl90eXBl
KSApOw0KICAgICAgICAgIGlmICggLTEgPT0gbGVuZ3RoKSAvLyBlcnJvcg0K
ICAgICAgICAgICAgew0KICAgICAgICAgICAgIHRocm93IHN0ZDo6aW9zX2Jh
c2U6OmZhaWx1cmUoc3RkOjpzdHJpbmcoInNvY2tldCB3cml0aW5nIGZhaWxl
ZDoiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgKyA6OnN5c19lcnJsaXN0W2Vycm5vXSk7IC8vIGVycm5vLmgNCiAgICAg
ICAgICAgIH0NCiAgICAgICAgICBlbHNlIGlmKCAwID09IGxlbmd0aCApDQog
ICAgICAgICAgICB7DQogICAgICAgICAgICAgIC8vIEkgZG9uJ3Qga25vdyBo
b3cgdG8gaW50ZXJwcmV0IHRoaXMgY2FzZQ0KICAgICAgICAgICAgICB0aHJv
dyBzdGQ6Omlvc19iYXNlOjpmYWlsdXJlKCJ3cml0ZSBpbnRvIHNvY2tldCBy
ZXR1cm5lZCAwIik7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIC8vIGNo
YXJhY3RlciB3YXMgd3JpdHRlbg0KICAgICAgICB9Ow0KICAgIH07DQogIHJl
dHVybiB0cmFpdHNfdHlwZTo6bm90X2VvZihjKTsNCn07IC8vIFNvY2tldEJ1
ZmZlcjo6b3ZlcmZsb3coDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tDQoNCi8vIGVuZCBvZiBmaWxlDQo=
--1484943558-1020451908-1027529655=:2225
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="ServerInterface.hpp"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.33.0207241754152.2225@rpc19.cs.man.ac.uk>
Content-Description: 
Content-Disposition: attachment; filename="ServerInterface.hpp"

Ly89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0tKi1DKystKi09PQ0KLy8gJElkOiBT
ZXJ2ZXJJbnRlcmZhY2UuaHBwLHYgMS4xLjEuMSAyMDAyLzA3LzE2IDE0OjAy
OjQ3IGNoYWx0c2VhIEV4cCAkIA0KLy8NCi8vIEZpbGU6ICAgICAgICBTZXJ2
ZXJJbnRlcmZhY2UuaHBwDQovLyBEZXNjcmlwdGlvbjogQ29udGFpbnMgZ3Jv
dXAgb2YgY2xhc3MgdG8gYmluZCBzb2NrZXQgd2l0aCBzdGQ6Omlvc3RyZWFt
IA0KLy8gICAgICAgICAgICAgIGNsYXNzZXMuIFRoZXJlIGFyZSB0cmVlIGNs
YXNzZXM6DQovLyAgICAgICAgICAgICAgICAgIFNvY2tldEJ1ZmZlciBpbmhl
cml0ZWQgZnJvbSBzdGQ6OnN0cmVhbWJ1ZmYNCi8vICAgICAgICAgICAgICAg
ICAgSVNvY2tldFN0cmVhbSBpbmhlcml0ZWQgZnJvbSBzdGQ6OmlzdHJlYW0N
Ci8vICAgICAgICAgICAgICAgICAgT1NvY2tldFN0cmVhbSBpbmhlcml0ZWQg
ZnJvbSBzdGQ6Om9zdHJlYW0NCi8vICAgICAgICAgICAgICAgICAgSU9Tb2Nr
ZXRTdHJlYW0gaW5oZXJpdGVkIGZyb20gc3RkOjppb3N0cmVhbQ0KLy8NCi8v
ICAgICAgICAgICAgICBTb2NrZXRCdWZmZXIgaGFzIGZ1bmN0aW9uIGluaXQg
dGhhdCBtdXN0IGJlIGludm9rZWQgb25jZSB0byANCi8vICAgICAgICAgICAg
ICBpbnRhbGwgc2VydmVyICh0Y3AgcHJvdG9jb2wpIG9uIHRoZSBwb3J0IGdp
dmVuIGFzIGFyZ3VtZW50IA0KLy8gICAgICAgICAgICAgIHRvIGNvbnN0cnVj
dG9yLg0KLy8gICAgICAgICAgICAgIEFsbCBvdGhlciBjbGFzc2VzIGluZWhl
ZWl0IGZyb20gc3Rhcm5kYXJkIGNsYXNzZXMgYnV0IGNyZWF0ZQ0KLy8gICAg
ICAgICAgICAgIGFuZCB1c2UgU29ja2V0QnVmZmVyIGluc3RlYWQgb2Ygc3Rk
OjpzdHJlYW1idWZmLg0KLy8gICAgICAgICAgICAgIEVzdGFibGlzaGluZyBh
IGNvbm5lY3Rpb24gYmxvY2tzIGV4ZWN1dGlvbiB0aWxsIGEgY29ubmVjdGlv
bg0KLy8gICAgICAgICAgICAgIGlzIHByZXNlbnQuIFNvIGFsbCBvdXIgc3Ry
ZWFtIGNsYXNzZXMgYmxvY2sgZXhlY3V0aW9uIGFzIHdlbGwuDQovLyBQYXJ0
IG9mOiAgICAgVmFtcGlyZS1TaWdtYSBjb21tdW5pY2F0aW9uIHRocm91Z2gg
WE1MLUtJRiBpbnRlcmZhY2UuDQovLyBTdGF0dXM6ICAgICAgZHJhZnQNCi8v
IENyZWF0ZWQ6ICAgICBKdWwgMTcsIDIwMDIsIEFuZHJleSBDaGFsdHNldiwg
Y2hhbHRzZXZAY3MubWFuLmFjLnVrDQovLyBEb2M6DQovLyBDb21wbGlhbmNl
Og0KLy8gUmV2aWV3ZWQ6ICAgIA0KLy8gUmV2aXNlZDogICAgIA0KLy8gTm90
ZTogICAgICAgIA0KLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
DQojaWZuZGVmIFNFUlZFUl9JTlRFUkZBQ0VfSFBQDQojZGVmaW5lCVNFUlZF
Ul9JTlRFUkZBQ0VfSFBQDQovLz09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT0NCg0KI2luY2x1ZGUgPGlvc3RyZWFtPg0KLy89PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09DQovLz09PT09PT09PT09PT09ICAgICBjbGFz
cyBTb2NrZXRCdWZmZXIgICAgICA9PT09PT09PT09PT09PT09PT09PT09PT09
PQ0KLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQovKiogQ2xh
c3MgU29ja2V0QnVmZmVyIC0gaXMgYSBzdGQ6OnN0cmVtYnVmIHRoYXQgdXNl
cyBzb2NrZXQgYXMgaW5wdXQgDQogICAgc291cmNlIGFuZCBvdXB1dCBzaW5r
LiBBbGwgbmVjZXNzYXJ5IHZpcnR1YWwgZnVuY3Rpb25zIGFyZSByZXdyaXR0
ZW4uDQogICAgQ3JlYXRlIHNvY2tldCBidWZmZXIgdGhyb3V0aCBvbmx5IHBv
c3NpYmxlIGNvbnN0cnVjdG9yIGFuZCB0aGVuIGludm9rZSANCiAgICBpbml0
KCkgdG8gZXN0YWJsaXNoIGNvbm5lY3Rpb24gKGl0IGJsb2NrcyBleGVjdXRp
b24gdGlsbCBhIGNvbm5lY3Rpb24NCiAgICBpcyBwcmVzZW50KS4NCiAgICBJ
biBjYXNlIG9mIGVycm9yIHNvbWUgZnVuY3Rpb24gbWF5IHRocm91Z2ggc3Rk
Ojppb3NfYmFzZTo6ZmFpbHVyZSANCiAgICBleGNlcHRpb24uIFRoaXMgY2xh
c3MgaGFzIGZ1bmN0aW9uIHdoYXQoKSB0aGF0IHJldHVybnMgY29uc3QgY2hh
ciogd2l0aA0KICAgIHNvbWUgZXJyb3IgbWVzc2FnZS4NCiovDQpjbGFzcyBT
b2NrZXRCdWZmZXIgOiBwdWJsaWMgc3RkOjpzdHJlYW1idWYNCnsNCnB1Ymxp
YzoNCiAgLy8gb25seSBwb3NzaWJsZSBjb25zdHJ1Y3Rvci4gQ3JlYXRlcyBi
dWZmZXJzIGFuZCByZW1lbWJlciBwb3J0IG51bWJlci4NCiAgLy8gRnVuY3Rp
b24gJ2luaXQnIG11c3QgYmUgaW52b2tlZCAob25jZSkgdG8gZXN0YWJsaXNo
IHNlcnZlciBvbiANCiAgLy8gdGhlIGdpdmVuIHBvcnQgYW5kIGEgY29ubmVj
dGlvbiB3aXRoIGEgY2xpZW50Lg0KICBTb2NrZXRCdWZmZXIgKHVuc2lnbmVk
IGludCBwb3J0KSA7DQogIHZpcnR1YWwgCQl+U29ja2V0QnVmZmVyICgpOw0K
DQogIC8vIGVzdGFibGlzaGVzIGNvbm5lY3Rpb246IGl0IGNyZWF0ZSBzb2Nr
ZXQsIGJpbmQgaXQgdG8gcG9ydCwgYmVnaW5zIHRvIA0KICAvLyBsaXN0ZW4s
IHRoZW4gYWNjZXB0IGluY29taW5nIGNvbm5lY3Rpb24uDQogIC8vIFRoaXMg
ZnVuY3Rpb24gYmxvY2tzIGV4ZWN1dGlvbiB1bnRpbGwgIGEgY29ubmVjdGlv
biBpcyBwcmVzZW50Lg0KICAvLyBUaGUgZnVuY3Rpb24gbXVzdCBiZSBpbnZv
a2VkIGFmdGVyIGEgY29uc3RydWN0b3IgYW5kIGJlZm9yZSBmaXJzdCANCiAg
Ly8gaW5wdXQvb3V0cHV0IG9wZXJhdGlvbi4NCiAgLy8gdGhpcyBmdW5jdGlv
biBtdXN0IGJlIGludm9rZWQgb25seSBvbmNlLg0KICAvLyBpbiBjYXNlIG9m
IGVycm9yIGl0IHRocm93cyBleGNlcHRpb24gLi4uLg0KICB2b2lkIGluaXQo
KSAgdGhyb3cgKHN0ZDo6aW9zX2Jhc2U6OmZhaWx1cmUpOw0KDQpwcm90ZWN0
ZWQ6DQogIC8vQHtuYW1lIHZpcnR1YWwgZnVuY3Rpb25zIGZyb20gc3RkOjpz
dHJlYW1idWZmDQogIHZpcnR1YWwgaW50ICAgICAgICAgICAgIHN5bmMoKTsN
CiAgdmlydHVhbCBpbnQgICAgICAgICAgICAgc2hvd21hbnljICgpIGNvbnN0
Ow0KICB2aXJ0dWFsIHN0ZDo6c3RyZWFtc2l6ZSB4c2dldG4gKGNoYXJfdHlw
ZSogcywgc3RkOjpzdHJlYW1zaXplIG4pOw0KICB2aXJ0dWFsIGludF90eXBl
ICAgICAgICB1bmRlcmZsb3cgKCk7DQogIHZpcnR1YWwgaW50X3R5cGUgICAg
ICAgIHVmbG93ICgpOw0KDQogIHZpcnR1YWwgaW50X3R5cGUgICAgICAgIHBi
YWNrZmFpbCAoaW50X3R5cGUgYyA9IHRyYWl0c190eXBlOjplb2YoKSApOw0K
DQogIHZpcnR1YWwgc3RkOjpzdHJlYW1zaXplIHhzcHV0biAoY29uc3QgY2hh
cl90eXBlKiBzLCBzdGQ6OnN0cmVhbXNpemUgbik7DQogIHZpcnR1YWwgaW50
X3R5cGUgICAgICAgIG92ZXJmbG93IChpbnRfdHlwZSBjID0gdHJhaXRzX3R5
cGU6OmVvZigpICk7DQogIC8vQH0NCiAgLy8gYWxsIG90aGVyIHZpcnR1YWwg
ZnVuY3Rpb25zIGFyZSBub3QgdXNlZA0KDQoNCnByaXZhdGU6DQogIC8vIGNv
Y2tldCB0aGF0IGNyZWF0ZWQgYnkgOjpjb2NrZXQgYW5kIHRoYXQgbGlzdGVu
cyBnaXZlbiBwb3J0Lg0KICAvLyAgLTEgbWVhbnMgdW5pbml0aWF6ZWQNCiAg
aW50CWxpc3RlbmluZ1NvY2tldF87DQogIC8vIGNvY2tldCBjcmVhdGVkIGJ5
IDo6YWNjZXB0LCB1c2VkIGFuZCBpbnB1dCBhbmQgb3V0cHV0DQogIC8vICAt
MSBtZWFucyB1bmluaXRpYXplZA0KICBpbnQJYWNjZXB0ZWRTb2NrZXRfOw0K
ICAvLyBwb3J0IHRoYXQgd2lsbCBiZSBsaXN0ZW5lZA0KICB1bnNpZ25lZCBp
bnQgcG9ydF87DQogIC8vIGlucHV0IGJ1ZmZlci4gaXRzIHNpemUgc3BlY2lm
aWVkIGluIC5jcHAgZmlsZS4gdXNlZCB0byBpbnZva2Ugc2V0Zw0KICBjaGFy
X3R5cGUqIGluQnVmZmVyXzsNCiAgLy8gb3V0cHV0IGJ1ZmZlci4gaXRzIHNp
emUgc3BlY2lmaWVkIGluIC5jcHAgZmlsZS4gdXNlZCB0byBpbnZva2Ugc2V0
cA0KICBjaGFyX3R5cGUqIG91dEJ1ZmZlcl87DQoNCnByaXZhdGU6DQogIC8v
IHJ1YmJpc2gNCiAgU29ja2V0QnVmZmVyICggKTsNCiAgU29ja2V0QnVmZmVy
ICggY29uc3QgU29ja2V0QnVmZmVyJiApOw0KICBTb2NrZXRCdWZmZXImCW9w
ZXJhdG9yID0gKCBjb25zdCBTb2NrZXRCdWZmZXImICk7DQp9OyAvLyBjbGFz
cyBTb2NrZXRCdWZmZXINCg0KLy89PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09DQovLz09PT09PT09PT09PT09ICAgICBjbGFzcyAgSVNvY2tldFN0
cmVhbSAgICAgPT09PT09PT09PT09PT09PT09PT09PT09PT0NCi8vPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQovLyBjbGFzcyB0aGF0IGhh
cyB0aGUgc2FtZSBpbnRlcmZhY2UgYXMgc3RhbmRhcmQgc3RkOjppc3RyZWFt
IGJ1dCB3b3JrcyB3aXRoDQovLyBvdXIgU29ja2V0QnVmZmVyIGluc3RlYWQg
b2Ygc3RkOjpzdHJlYW1idWYNCmNsYXNzIElTb2NrZXRTdHJlYW06IHB1Ymxp
YyBzdGQ6OmlzdHJlYW0NCnsNCnB1YmxpYzoNCiAgLy8gb25seSBwb3NzaWJs
ZSBjb25zdHJ1Y3Rvci4gVGFrZXMgcG9ydCh0aGF0IHdpbGwgYmUgbGlzdGVu
ZWQgYnkgdGhlIHNlcnZlcikNCiAgLy8gYXMgYXJndW1lbnQNCiAgLy8gSW4g
Y2FzZSBvZiBlcnJvciB0aHJvd3MgZXhjZXB0aW9uKGJ1dCB5b3UgbWF5IGlu
dm9rZSBkZXN0cnVjdG9yIGFmdGVyIGl0KSANCiAgLy8gSXQgY3JlYXRlcyBT
b2NrZXRCdWZmZXIgb2JqZWN0IGFuZCANCiAgLy8gaW5pdGlhbGlzZSBpdChl
c3RhYmxpc2hlcyB0aGUgc2VydmVyIGFuZCBhIGNvbm5lY3Rpb24pDQogIElT
b2NrZXRTdHJlYW0odW5zaWduZWQgaW50IHBvcnQpIDogc3RkOjppc3RyZWFt
KG5ldyBTb2NrZXRCdWZmZXIocG9ydCkpDQogIHsgcmRidWYoKS0+aW5pdCgp
OyB9DQogIHZpcnR1YWwgIH5JU29ja2V0U3RyZWFtICgpIHsgZGVsZXRlIHJk
YnVmKCk7fQ0KICBTb2NrZXRCdWZmZXIqCQlyZGJ1ZiAoKSAgIHsgcmV0dXJu
IChTb2NrZXRCdWZmZXIqKXN0ZDo6aXN0cmVhbTo6cmRidWYoKTsgfTsNCiAg
U29ja2V0QnVmZmVyKglvcGVyYXRvci0+KCkgeyByZXR1cm4gcmRidWYoKTsg
fQ0KcHJvdGVjdGVkOg0KICAvLyBydWJiaXNoDQogIElTb2NrZXRTdHJlYW0o
KTsNCiAgSVNvY2tldFN0cmVhbShTb2NrZXRCdWZmZXImIGlzKTsNCiAgSVNv
Y2tldFN0cmVhbShTb2NrZXRCdWZmZXIqIHNiKTsNCiAgSVNvY2tldFN0cmVh
bSYgb3BlcmF0b3I9KElTb2NrZXRTdHJlYW0mKTsNCn07IC8vIGNsYXNzIElT
b2NrZXRTdHJlYW06IHB1YmxpYyBpc3RyZWFtDQoNCi8vPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PQ0KLy89PT09PT09PT09PT09PSAgICAgY2xh
c3MgIE9Tb2NrZXRTdHJlYW0gICAgID09PT09PT09PT09PT09PT09PT09PT09
PT09DQovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KLy8g
Y2xhc3MgdGhhdCBoYXMgdGhlIHNhbWUgaW50ZXJmYWNlIGFzIHN0YW5kYXJk
IHN0ZDo6b3N0cmVhbSBidXQgd29ya3Mgd2l0aA0KLy8gb3VyIFNvY2tldEJ1
ZmZlciBpbnN0ZWFkIG9mIHN0ZDo6c3RyZWFtYnVmDQovLyBEbyBub3QgZm9y
Z2V0IHRvIGZsdXNoIHN0cmVhbSBhZnRlciBldmVyeSBvdXRwdXQgb3BlcmF0
aW9uIHRvIGZvcmNlIA0KLy8gZGF0YSB0byBiZSByZWFsbHkgd3JpdHRlbiBp
bnRvIHRoZSBzb2NrZXQgbm90IGludG8gdGhlIGJ1ZmZlcg0KY2xhc3MgT1Nv
Y2tldFN0cmVhbTogcHVibGljIHN0ZDo6b3N0cmVhbQ0Kew0KcHVibGljOg0K
ICAvLyBvbmx5IHBvc3NpYmxlIGNvbnN0cnVjdG9yLiBUYWtlcyBwb3J0KHRo
YXQgd2lsbCBiZSBsaXN0ZW5lZCBieSB0aGUgc2VydmVyKQ0KICAvLyBhcyBh
cmd1bWVudA0KICAvLyBJbiBjYXNlIG9mIGVycm9yIHRocm93cyBleGNlcHRp
b24oYnV0IHlvdSBtYXkgaW52b2tlIGRlc3RydWN0b3IgYWZ0ZXIgaXQpIA0K
ICAvLyBJdCBjcmVhdGVzIFNvY2tldEJ1ZmZlciBvYmplY3Qoc28gZXN0YWJs
aXNoZXMgdGhlIHNlcnZlciBhbmQgYSBjb25uZWN0aW9uKQ0KICBPU29ja2V0
U3RyZWFtKHVuc2lnbmVkIGludCBwb3J0KSA6IHN0ZDo6b3N0cmVhbShuZXcg
U29ja2V0QnVmZmVyKHBvcnQpKQ0KICB7cmRidWYoKS0+aW5pdCgpO30NCiAg
dmlydHVhbAkJfk9Tb2NrZXRTdHJlYW0gKCl7IGRlbGV0ZSByZGJ1ZigpO30N
Cg0KICBTb2NrZXRCdWZmZXIqCXJkYnVmKCkgICAgICB7IHJldHVybiAoU29j
a2V0QnVmZmVyKilzdGQ6Om9zdHJlYW06OnJkYnVmKCk7IH07DQogIFNvY2tl
dEJ1ZmZlcioJb3BlcmF0b3ItPigpIHsgcmV0dXJuIHJkYnVmKCk7IH0NCnBy
b3RlY3RlZDoNCiAgLy8gcnViYmlzaA0KICBPU29ja2V0U3RyZWFtKCk7DQog
IE9Tb2NrZXRTdHJlYW0oT1NvY2tldFN0cmVhbSYgb3MpOw0KICBPU29ja2V0
U3RyZWFtKFNvY2tldEJ1ZmZlciogc2IpOw0KICBPU29ja2V0U3RyZWFtJiBv
cGVyYXRvcj0oT1NvY2tldFN0cmVhbSYpOw0KfTsgLy8gY2xhc3MgT1NvY2tl
dFN0cmVhbTogcHVibGljIG9zdHJlYW0NCg0KLy89PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09DQovLz09PT09PT09PT09PT09ICAgICBjbGFzcyAg
SU9Tb2NrZXRTdHJlYW0gICAgID09PT09PT09PT09PT09PT09PT09PT09PT09
DQovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KLy8gY2xh
c3MgdGhhdCBoYXMgdGhlIHNhbWUgaW50ZXJmYWNlIGFzIHN0YW5kYXJkIHN0
ZDo6aW9zdHJlYW0gYnV0IHdvcmtzIHdpdGgNCi8vIG91ciBTb2NrZXRCdWZm
ZXIgaW5zdGVhZCBvZiBzdGQ6OnN0cmVhbWJ1Zg0KLy8gRG8gbm90IGZvcmdl
dCB0byBmbHVzaCBzdHJlYW0gYWZ0ZXIgZXZlcnkgb3V0cHV0IG9wZXJhdGlv
biB0byBmb3JjZSANCi8vIGRhdGEgdG8gYmUgcmVhbGx5IHdyaXR0ZW4gaW50
byB0aGUgc29ja2V0IG5vdCBpbnRvIHRoZSBidWZmZXINCmNsYXNzIElPU29j
a2V0U3RyZWFtOiBwdWJsaWMgc3RkOjppb3N0cmVhbQ0Kew0KcHVibGljOg0K
ICAvLyBvbmx5IHBvc3NpYmxlIGNvbnN0cnVjdG9yLiBUYWtlcyBwb3J0KHRo
YXQgd2lsbCBiZSBsaXN0ZW5lZCBieSB0aGUgc2VydmVyKQ0KICAvLyBhcyBh
cmd1bWVudA0KICAvLyBJbiBjYXNlIG9mIGVycm9yIHRocm93cyBleGNlcHRp
b24oYnV0IHlvdSBtYXkgaW52b2tlIGRlc3RydWN0b3IgYWZ0ZXIgaXQpIA0K
ICAvLyBJdCBjcmVhdGVzIFNvY2tldEJ1ZmZlciBvYmplY3Qoc28gZXN0YWJs
aXNoZXMgdGhlIHNlcnZlciBhbmQgYSBjb25uZWN0aW9uKQ0KICBJT1NvY2tl
dFN0cmVhbSAodW5zaWduZWQgaW50IHBvcnQpOiBzdGQ6Omlvc3RyZWFtKG5l
dyBTb2NrZXRCdWZmZXIocG9ydCkpIA0KICB7cmRidWYoKS0+aW5pdCgpO30N
CiAgdmlydHVhbCB+SU9Tb2NrZXRTdHJlYW0gKCkgeyBkZWxldGUgcmRidWYo
KTsgfQ0KICBTb2NrZXRCdWZmZXIqCXJkYnVmICgpICAgICB7IHJldHVybiAo
U29ja2V0QnVmZmVyKilzdGQ6Omlvc3RyZWFtOjpyZGJ1ZigpOyB9Ow0KICBT
b2NrZXRCdWZmZXIqCW9wZXJhdG9yLT4oKSB7IHJldHVybiByZGJ1ZigpOyB9
DQpwcm90ZWN0ZWQ6DQogIC8vIHJ1YmJpc2gNCiAgSU9Tb2NrZXRTdHJlYW0o
KTsNCiAgSU9Tb2NrZXRTdHJlYW0oSU9Tb2NrZXRTdHJlYW0mIG9zKTsNCiAg
SU9Tb2NrZXRTdHJlYW0oU29ja2V0QnVmZmVyKiBzYik7DQogIElPU29ja2V0
U3RyZWFtJiBvcGVyYXRvcj0oSU9Tb2NrZXRTdHJlYW0mKTsNCn07DQoNCiNl
bmRpZgkvLyBfU09DS0VUX1NUUkVBTV9IDQo=
--1484943558-1020451908-1027529655=:2225--

